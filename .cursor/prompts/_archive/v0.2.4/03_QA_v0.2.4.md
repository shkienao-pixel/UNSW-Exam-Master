# 03_QA_v0.2.4.md

## QA Verdict
- **Status:** PENDING (execute test matrix below)
- **Scope:** v0.2.4 Flashcards + Mistakes Bank + Navigation Routing

---

## 1. Navigation Routing Tests

### N1. Route Reachability
- [ ] `/dashboard` renders
- [ ] `/study` renders
- [ ] `/quiz` renders
- [ ] `/flashcards` renders
- [ ] `/mistakes` renders

### N2. Refresh Stability
- [ ] Refresh each route does not break rendering/state initialization.

### N3. Decoupling Validation
- [ ] Quiz behavior changes do not mutate Flashcards state.
- [ ] Flashcards review does not mutate Quiz state.

---

## 2. Flashcards Tests

### F1. Mixed Deck Generation
- [ ] Generate deck with mixed `mcq` + `knowledge` cards.
- [ ] Generated payload conforms to strict JSON schema.

### F2. Rendering Contract
- [ ] MCQ card renders stem + options.
- [ ] Knowledge card renders stem only on front.
- [ ] `showAnswer` toggle reveals back content correctly.

### F3. Review Actions
- [ ] `known` updates flashcard stats.
- [ ] `unknown` updates flashcard stats.
- [ ] Progress `i/N` increments correctly.
- [ ] Deck completion shows finished state.

---

## 3. Mistakes Tests

### M1. Unknown -> Mistakes Upsert
- [ ] First unknown inserts mistake item.
- [ ] Repeated unknown on same card does not duplicate row.
- [ ] `wrongCount` increments on repeated unknown.

### M2. List + Filter
- [ ] Mistakes list API/page returns expected rows.
- [ ] Status filter works.

### M3. Review Active Only
- [ ] Mistakes review source includes only `status='active'`.
- [ ] Sorting priority validated:
  - `wrongCount DESC`
  - `lastWrongAt DESC`

### M4. Master/Delete Transitions
- [ ] `master` updates status to `mastered`.
- [ ] `delete` performs soft delete (`archived`).

---

## 4. Regression Checklist
- [ ] Study page upload/index/generation still works.
- [ ] Quiz page generation/answering still works.
- [ ] Document extraction/chunking flow is unchanged and passing.

---

## 5. Evidence Commands

1. Syntax compile:
```powershell
.\.venv\Scripts\python.exe -m py_compile src\app.py src\i18n.py src\services\*.py scripts\self_check.py
```

2. Migration + sanity:
```powershell
.\.venv\Scripts\python.exe scripts\self_check.py
```

3. Route and feature trace:
```powershell
rg -n "dashboard|study|quiz|flashcards|mistakes|showAnswer|unknown|wrongCount|master|archived" src -S
```

4. Endpoint smoke (example set):
```powershell
# POST /api/flashcards/generate
# POST /api/flashcards/:id/review
# GET  /api/mistakes
# GET  /api/mistakes/review
# POST /api/mistakes/:id/master
# DELETE /api/mistakes/:id
```

---

## 6. Manual Repro Paths
1. Navigate all 5 routes and refresh each route.
2. Generate mixed flashcards deck and review through completion.
3. Mark same card unknown multiple times, verify mistakes dedup + `wrongCount` increments.
4. Open Mistakes page -> filter -> review active deck -> master/delete items.
5. Run Study and Quiz core flows to confirm no regressions.

---

## 7. Residual Risks
- LLM output compliance risk remains if generator does not strictly honor JSON schema.
- Source grounding quality depends on chunk retrieval quality and prompt discipline.
- End-user data volume/performance behavior should be monitored in later iteration.
